# Generated by BabelSDK

import json
from collections import OrderedDict
from bottle import (
    HTTPResponse,
    request,
    response,
    route,
    run,
)

def segmentation_response(header, *segments):
    """Constructs HTTP headers and body for a segmentation response."""
    response_json = []

    for segment in segments:
        response_json.append(segment)

    if len(response_json) == 1:
        response_json = response_json[0]

    if header:
        response.headers['Dropbox-API-Result'] = json.dumps(response_json, indent=2)
    else:
        # Manually convert json to a string because bottle only dumps json for
        # dicts, and not lists.
        response.content_type = 'application/json'
        return json.dumps(response_json)

@route('/2/v1/accountinfo', method=['GET', 'POST'])
def v1_account_info():
    return segmentation_response(
        False,
        OrderedDict([('referral_link', 'https://db.tt/ZITNuhtI'), ('display_name', 'Jon Snow'), ('uid', 386406), ('country', 'US'), ('email', 'jsnow@westeros.com'), ('quota_info', OrderedDict([('quota', 1000000), ('normal', 1000), ('shared', 500), ('datastores', 100)])), ('team', OrderedDict([('name', 'Acme, Inc.')]))]),
    )

@route('/2/v1/getfile', method=['GET', 'POST'])
def v1_get_file():
    return segmentation_response(
        True,
        OrderedDict([('path', '/a/b/c.txt'), ('size', '32 bytes'), ('bytes', 32), ('is_dir', True), ('thumb_exists', True), ('icon', 'page_white'), ('root', 'dropbox'), ('photo_info', OrderedDict([('time_taken', 'Sat, 28 Jun 2014 18:23:21 +0000'), ('lat_long', None)])), ('video_info', OrderedDict([('time_taken', 'Sat, 28 Jun 2014 18:23:21 +0000'), ('lat_long', None), ('duration', 3)]))]),
    )

@route('/2/v1/putfile', method=['POST'])
def v1_put_file():
    return segmentation_response(
        True,
        OrderedDict([('path', '/a/b/c.txt'), ('size', '32 bytes'), ('bytes', 32), ('is_dir', True), ('thumb_exists', True), ('icon', 'page_white'), ('root', 'dropbox'), ('photo_info', OrderedDict([('time_taken', 'Sat, 28 Jun 2014 18:23:21 +0000'), ('lat_long', None)])), ('video_info', OrderedDict([('time_taken', 'Sat, 28 Jun 2014 18:23:21 +0000'), ('lat_long', None), ('duration', 3)]))]),
    )

@route('/2/v1/metadata', method=['GET', 'POST'])
def v1_metadata():
    return segmentation_response(
        False,
        {'no example': 'no example'},
    )


run(host='localhost', port=8080, debug=True, reloader=True)